<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>64å¦</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%);
            min-height: 100vh;
            color: #e0e0e0;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: #f5f5f5;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%);
            color: #ffffff;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: bold;
        }

        .header p {
            margin: 10px 0 0 0;
            font-size: 1.2em;
            opacity: 0.9;
        }

        .mode-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            padding: 20px;
            background: #f0f0f0;
            flex-wrap: wrap;
        }

        .mode-btn {
            padding: 10px 15px;
            border: none;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f5f5f5;
            color: #333;
            border: 2px solid #333;
            text-align: center;
            min-width: 80px;
            flex: 1;
            max-width: 120px;
        }

        .mode-btn:hover {
            background: #333;
            color: #ffffff;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .mode-btn.active {
            background: #333;
            color: #ffffff;
        }

        .practice-area {
            padding: 20px 40px 40px 40px;
            min-height: 500px;
        }

        .question-container {
            text-align: center;
            margin-bottom: 30px;
        }

        .question-title {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        .gua-display {
            background: #f0f0f0;
            border-radius: 15px;
            padding: 10px;
            margin: 0;
            border: 2px solid #666;
        }

        .gua-symbol {
            font-family: 'Courier New', monospace;
            font-size: 1.4em;
            line-height: 0.5;
            margin: 0;
            color: #333;
        }

        .gua-name-display {
            font-size: 2em;
            font-weight: bold;
            color: #333;
            margin: 0;
        }

        .options-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .option-btn {
            padding: 8px 12px;
            border: 2px solid #666;
            border-radius: 8px;
            background: #f5f5f5;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
            text-align: center;
        }

        .option-btn:hover {
            border-color: #333;
            background: #f0f0f0;
            transform: translateY(-2px);
        }

        .option-btn.selected {
            border-color: #333;
            background: #333;
            color: #ffffff;
        }

        .option-btn.correct {
            border-color: #28a745;
            background: #28a745;
            color: #ffffff;
        }

        .option-btn.incorrect {
            border-color: #dc3545;
            background: #dc3545;
            color: #ffffff;
        }

        .input-container {
            margin: 30px 0;
        }

        .input-label {
            display: block;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #e0e0e0;
        }

        .gua-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #666;
            border-radius: 10px;
            font-size: 1.2em;
            font-family: 'Courier New', monospace;
            text-align: center;
            transition: border-color 0.3s ease;
        }

        .gua-input:focus {
            outline: none;
            border-color: #333;
        }

        .input-hint {
            font-size: 0.9em;
            color: #555;
            margin-top: 10px;
            text-align: center;
        }

        .control-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            max-width: 150px;
        }

        .btn-primary {
            background: #333;
            color: #ffffff;
        }

        .btn-primary:hover {
            background: #555;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #666;
            color: #ffffff;
        }

        .btn-secondary:hover {
            background: #555;
        }

        .btn-success {
            background: #333;
            color: #ffffff;
        }

        .btn-success:hover {
            background: #555;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .result-message {
            text-align: center;
            font-size: 1.3em;
            font-weight: bold;
            margin: 20px 0;
            padding: 15px;
            border-radius: 10px;
        }

        .result-correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .result-incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .stats-container {
            background: #f0f0f0;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }

        .stats-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .stat-item {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
        }

        .stat-label {
            font-size: 0.9em;
            color: #555;
            margin-top: 5px;
        }

        .hidden {
            display: none;
        }

        /* é€šå…³æµ‹è¯•æ ·å¼ */
        .challenge-header {
            padding: 15px 0;
            margin-bottom: 20px;
        }

        .challenge-progress {
            width: 100%;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .progress-text {
            font-size: 1.1em;
            font-weight: bold;
            color: #333;
        }

        .timer-text {
            font-size: 1.1em;
            font-weight: bold;
            color: #333;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #333, #1a1a1a);
            width: 0%;
            transition: width 0.3s ease;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }
            
            .stats-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 8px;
            }
            
            .stat-item {
                padding: 8px;
            }
            
            .stat-value {
                font-size: 1.2em;
            }
            
            .stat-label {
                font-size: 0.8em;
            }
            
            .mode-selector {
                gap: 8px;
            }
            
            .mode-btn {
                padding: 8px 12px;
                font-size: 0.8em;
                min-width: 70px;
            }
            
            .control-buttons {
                gap: 10px;
            }
            
            .btn {
                padding: 8px 15px;
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>64å¦</h1>
        </div>

        <div class="mode-selector">
            <button class="mode-btn active" onclick="setMode('choice')">å¦è±¡é€‰å¦å</button>
            <button class="mode-btn" onclick="setMode('challenge')">é€šå…³æµ‹è¯•</button>
        </div>

        <div class="practice-area">
            <!-- é€‰æ‹©é¢˜æ¨¡å¼ -->
            <div id="choice-mode" class="practice-mode">
                <div class="question-container">
                    <div class="question-title">è¯·é€‰æ‹©æ­£ç¡®çš„å¦åï¼š</div>
                    <div class="gua-display">
                        <div class="gua-symbol" id="choice-gua-symbol"></div>
                    </div>
                    <div class="options-container" id="choice-options"></div>
                </div>
            </div>


            <!-- é€šå…³æµ‹è¯•æ¨¡å¼ -->
            <div id="challenge-mode" class="practice-mode hidden">
                <div class="challenge-header">
                    <div class="challenge-progress">
                        <div class="progress-info">
                            <div class="progress-text">è¿›åº¦: <span id="challenge-progress">0/64</span></div>
                            <div class="timer-text">ç”¨æ—¶: <span id="challenge-timer">00:00</span></div>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>
                    </div>
                </div>
                <div class="question-container">
                    <div class="question-title" id="challenge-question-title"></div>
                    <div class="gua-display" id="challenge-gua-display"></div>
                    <div class="options-container" id="challenge-options"></div>
                </div>
            </div>

            <!-- ç»“æœæ˜¾ç¤º -->
            <div id="result-message" class="result-message hidden"></div>

            <!-- æ§åˆ¶æŒ‰é’® -->
            <div class="control-buttons">
                <button class="btn btn-secondary" id="next-btn" onclick="nextQuestion()" disabled>ä¸‹ä¸€é¢˜</button>
                <button class="btn btn-success" id="restart-btn" onclick="restartPractice()">é‡æ–°å¼€å§‹</button>
            </div>

            <!-- ç»Ÿè®¡ä¿¡æ¯ -->
            <div class="stats-container" id="practice-stats">
                <div class="stats-title">ç»ƒä¹ ç»Ÿè®¡</div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="total-questions">0</div>
                        <div class="stat-label">æ€»é¢˜æ•°</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="correct-answers">0</div>
                        <div class="stat-label">æ­£ç¡®æ•°</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="accuracy-rate">0%</div>
                        <div class="stat-label">æ­£ç¡®ç‡</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 64å¦æ•°æ®
        const guaData = [
            { binary: '111111', name: 'ä¹¾ä¸ºå¤©' },
            { binary: '000000', name: 'å¤ä¸ºåœ°' },
            { binary: '010001', name: 'æ°´é›·å±¯' },
            { binary: '100010', name: 'å±±æ°´è’™' },
            { binary: '010111', name: 'æ°´å¤©éœ€' },
            { binary: '111010', name: 'å¤©æ°´è®¼' },
            { binary: '000010', name: 'åœ°æ°´å¸ˆ' },
            { binary: '010000', name: 'æ°´åœ°æ¯”' },
            { binary: '110111', name: 'é£å¤©å°ç•œ' },
            { binary: '111011', name: 'å¤©æ³½å±¥' },
            { binary: '000111', name: 'åœ°å¤©æ³°' },
            { binary: '111000', name: 'å¤©åœ°å¦' },
            { binary: '111101', name: 'å¤©ç«åŒäºº' },
            { binary: '101111', name: 'ç«å¤©å¤§æœ‰' },
            { binary: '000100', name: 'åœ°å±±è°¦' },
            { binary: '001000', name: 'é›·åœ°è±«' },
            { binary: '011001', name: 'æ³½é›·éš' },
            { binary: '100110', name: 'å±±é£è›Š' },
            { binary: '000011', name: 'åœ°æ³½ä¸´' },
            { binary: '110000', name: 'é£åœ°è§‚' },
            { binary: '101001', name: 'ç«é›·å™¬å—‘' },
            { binary: '100101', name: 'å±±ç«è´²' },
            { binary: '100000', name: 'å±±åœ°å‰¥' },
            { binary: '000001', name: 'åœ°é›·å¤' },
            { binary: '111001', name: 'å¤©é›·æ— å¦„' },
            { binary: '100111', name: 'å±±å¤©å¤§ç•œ' },
            { binary: '100001', name: 'å±±é›·é¢' },
            { binary: '011110', name: 'æ³½é£å¤§è¿‡' },
            { binary: '010010', name: 'åä¸ºæ°´' },
            { binary: '101101', name: 'ç¦»ä¸ºç«' },
            { binary: '011100', name: 'æ³½å±±å’¸' },
            { binary: '001110', name: 'é›·é£æ’' },
            { binary: '111110', name: 'å¤©å±±é¯' },
            { binary: '001111', name: 'é›·å¤©å¤§å£®' },
            { binary: '101000', name: 'ç«åœ°æ™‹' },
            { binary: '000101', name: 'åœ°ç«æ˜å¤·' },
            { binary: '110101', name: 'é£ç«å®¶äºº' },
            { binary: '101011', name: 'ç«æ³½ç½' },
            { binary: '010100', name: 'æ°´å±±è¹‡' },
            { binary: '001010', name: 'é›·æ°´è§£' },
            { binary: '100011', name: 'å±±æ³½æŸ' },
            { binary: '110001', name: 'é£é›·ç›Š' },
            { binary: '011111', name: 'æ³½å¤©å¤¬' },
            { binary: '111110', name: 'å¤©é£å§¤' },
            { binary: '011000', name: 'æ³½åœ°èƒ' },
            { binary: '000110', name: 'åœ°é£å‡' },
            { binary: '011010', name: 'æ³½æ°´å›°' },
            { binary: '010110', name: 'æ°´é£äº•' },
            { binary: '011101', name: 'æ³½ç«é©' },
            { binary: '101110', name: 'ç«é£é¼' },
            { binary: '001001', name: 'éœ‡ä¸ºé›·' },
            { binary: '100100', name: 'è‰®ä¸ºå±±' },
            { binary: '110100', name: 'é£å±±æ¸' },
            { binary: '001011', name: 'é›·æ³½å½’å¦¹' },
            { binary: '001101', name: 'é›·ç«ä¸°' },
            { binary: '101100', name: 'ç«å±±æ—…' },
            { binary: '110110', name: 'å·½ä¸ºé£' },
            { binary: '011011', name: 'å…‘ä¸ºæ³½' },
            { binary: '110010', name: 'é£æ°´æ¶£' },
            { binary: '010011', name: 'æ°´æ³½èŠ‚' },
            { binary: '110011', name: 'é£æ³½ä¸­å­š' },
            { binary: '001100', name: 'é›·å±±å°è¿‡' },
            { binary: '010101', name: 'æ°´ç«æ—¢æµ' },
            { binary: '101010', name: 'ç«æ°´æœªæµ' }
        ];

        let currentMode = 'choice';
        let currentQuestion = null;
        let selectedAnswer = null;
        let stats = {
            total: 0,
            correct: 0
        };

        // é€šå…³æµ‹è¯•ç›¸å…³å˜é‡
        let challengeData = [];
        let challengeIndex = 0;
        let challengeStartTime = null;
        let challengeTimer = null;
        let challengeStats = {
            completed: 0,
            total: 64
        };

        // è®¾ç½®ç»ƒä¹ æ¨¡å¼
        function setMode(mode) {
            currentMode = mode;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // æ˜¾ç¤ºå¯¹åº”æ¨¡å¼
            document.querySelectorAll('.practice-mode').forEach(div => {
                div.classList.add('hidden');
            });
            document.getElementById(mode + '-mode').classList.remove('hidden');
            
            // æ˜¾ç¤ºæˆ–éšè—ç»Ÿè®¡ä¿¡æ¯
            const statsContainer = document.getElementById('practice-stats');
            if (mode === 'challenge') {
                statsContainer.style.display = 'none';
            } else {
                statsContainer.style.display = 'block';
            }
            
            // é‡ç½®çŠ¶æ€
            resetQuestionState();
            
            if (mode === 'challenge') {
                startChallenge();
            } else {
                generateQuestion();
            }
        }

        // ç”Ÿæˆå¦è±¡ç¬¦å·
        function generateGuaSymbol(binary) {
            let symbol = '';
            for (let i = 0; i < 6; i++) {
                if (binary[i] === '1') {
                    symbol += 'â€”â€”â€”<br>';
                } else {
                    symbol += 'â€” â€”<br>';
                }
            }
            return symbol;
        }

        // ç”Ÿæˆéšæœºé¢˜ç›®
        function generateQuestion() {
            const randomIndex = Math.floor(Math.random() * guaData.length);
            currentQuestion = guaData[randomIndex];
            
            if (currentMode === 'choice') {
                generateChoiceQuestion();
            } else {
                generateInputQuestion();
            }
        }

        // ç”Ÿæˆé€‰æ‹©é¢˜
        function generateChoiceQuestion() {
            // æ˜¾ç¤ºå¦è±¡
            document.getElementById('choice-gua-symbol').innerHTML = generateGuaSymbol(currentQuestion.binary);
            
            // ç”Ÿæˆé€‰é¡¹
            const options = [currentQuestion.name];
            while (options.length < 4) {
                const randomGua = guaData[Math.floor(Math.random() * guaData.length)];
                if (!options.includes(randomGua.name)) {
                    options.push(randomGua.name);
                }
            }
            
            // æ‰“ä¹±é€‰é¡¹é¡ºåº
            options.sort(() => Math.random() - 0.5);
            
            // æ˜¾ç¤ºé€‰é¡¹
            const optionsContainer = document.getElementById('choice-options');
            optionsContainer.innerHTML = '';
            options.forEach(option => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = option;
                btn.onclick = () => selectAnswer(option);
                optionsContainer.appendChild(btn);
            });
        }


        // é€‰æ‹©ç­”æ¡ˆ
        function selectAnswer(answer) {
            selectedAnswer = answer;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            // ç›´æ¥æ£€æŸ¥ç­”æ¡ˆ
            checkAnswer();
        }

        // æ£€æŸ¥ç­”æ¡ˆ
        function checkAnswer() {
            const isCorrect = selectedAnswer === currentQuestion.name;
            showChoiceResult(isCorrect);
            
            // æ›´æ–°ç»Ÿè®¡
            stats.total++;
            if (isCorrect) {
                stats.correct++;
            }
            updateStats();
            
            // å¯ç”¨ä¸‹ä¸€é¢˜æŒ‰é’®
            document.getElementById('next-btn').disabled = false;
        }

        // æ˜¾ç¤ºé€‰æ‹©é¢˜ç»“æœ
        function showChoiceResult(isCorrect) {
            const options = document.querySelectorAll('.option-btn');
            options.forEach(btn => {
                if (btn.textContent === currentQuestion.name) {
                    btn.classList.add('correct');
                } else if (btn.textContent === selectedAnswer && !isCorrect) {
                    btn.classList.add('incorrect');
                }
                // ç¦ç”¨æ‰€æœ‰é€‰é¡¹æŒ‰é’®
                btn.disabled = true;
            });
            
            showResultMessage(isCorrect);
        }


        // æ˜¾ç¤ºç»“æœæ¶ˆæ¯
        function showResultMessage(isCorrect) {
            const resultDiv = document.getElementById('result-message');
            if (isCorrect) {
                resultDiv.className = 'result-message result-correct';
                resultDiv.textContent = 'æ­£ç¡®ï¼';
            } else {
                resultDiv.className = 'result-message result-incorrect';
                resultDiv.textContent = 'é”™è¯¯ï¼';
            }
            resultDiv.classList.remove('hidden');
        }

        // ä¸‹ä¸€é¢˜
        function nextQuestion() {
            resetQuestionState();
            generateQuestion();
        }

        // é‡ç½®é¢˜ç›®çŠ¶æ€
        function resetQuestionState() {
            selectedAnswer = null;
            document.getElementById('result-message').classList.add('hidden');
            document.getElementById('next-btn').disabled = true;
        }

        // é‡æ–°å¼€å§‹ç»ƒä¹ 
        function restartPractice() {
            stats = { total: 0, correct: 0 };
            updateStats();
            resetQuestionState();
            generateQuestion();
        }

        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        function updateStats() {
            document.getElementById('total-questions').textContent = stats.total;
            document.getElementById('correct-answers').textContent = stats.correct;
            const accuracy = stats.total > 0 ? Math.round((stats.correct / stats.total) * 100) : 0;
            document.getElementById('accuracy-rate').textContent = accuracy + '%';
        }

        // å¼€å§‹é€šå…³æµ‹è¯•
        function startChallenge() {
            // é‡ç½®æŒ‘æˆ˜æ•°æ®
            challengeData = [...guaData];
            challengeIndex = 0;
            challengeStats.completed = 0;
            
            // éšæœºæ‰“ä¹±64å¦é¡ºåº
            challengeData.sort(() => Math.random() - 0.5);
            
            // å¼€å§‹è®¡æ—¶
            challengeStartTime = Date.now();
            startTimer();
            
            // ç”Ÿæˆç¬¬ä¸€é¢˜
            generateChallengeQuestion();
        }

        // ç”ŸæˆæŒ‘æˆ˜é¢˜ç›®
        function generateChallengeQuestion() {
            if (challengeIndex >= challengeData.length) {
                // é€šå…³å®Œæˆ
                completeChallenge();
                return;
            }

            currentQuestion = challengeData[challengeIndex];
            
            // åªä½¿ç”¨å¦è±¡é€‰å¦åæ¨¡å¼
            generateChallengeChoiceQuestion();
            
            // æ›´æ–°è¿›åº¦
            updateChallengeProgress();
        }

        // ç”ŸæˆæŒ‘æˆ˜é€‰æ‹©é¢˜
        function generateChallengeChoiceQuestion() {
            document.getElementById('challenge-question-title').textContent = 'è¯·é€‰æ‹©æ­£ç¡®çš„å¦åï¼š';
            document.getElementById('challenge-gua-display').innerHTML = '<div class="gua-symbol">' + generateGuaSymbol(currentQuestion.binary) + '</div>';
            document.getElementById('challenge-options').style.display = 'grid';
            
            // ç”Ÿæˆé€‰é¡¹
            const options = [currentQuestion.name];
            while (options.length < 4) {
                const randomGua = guaData[Math.floor(Math.random() * guaData.length)];
                if (!options.includes(randomGua.name)) {
                    options.push(randomGua.name);
                }
            }
            options.sort(() => Math.random() - 0.5);
            
            // æ˜¾ç¤ºé€‰é¡¹
            const optionsContainer = document.getElementById('challenge-options');
            optionsContainer.innerHTML = '';
            options.forEach(option => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = option;
                btn.onclick = () => selectChallengeAnswer(option);
                optionsContainer.appendChild(btn);
            });
        }


        // é€‰æ‹©æŒ‘æˆ˜ç­”æ¡ˆ
        function selectChallengeAnswer(answer) {
            selectedAnswer = answer;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('#challenge-options .option-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            // ç«‹å³æ£€æŸ¥ç­”æ¡ˆ
            checkChallengeAnswer();
        }

        // æ£€æŸ¥æŒ‘æˆ˜ç­”æ¡ˆ
        function checkChallengeAnswer() {
            const isCorrect = selectedAnswer === currentQuestion.name;
            
            if (isCorrect) {
                challengeStats.completed++;
                challengeIndex++;
                
                // æ˜¾ç¤ºæ­£ç¡®ç»“æœ
                showChallengeResult(true);
                
                // å»¶è¿Ÿåè¿›å…¥ä¸‹ä¸€é¢˜
                setTimeout(() => {
                    generateChallengeQuestion();
                }, 1000);
            } else {
                // æŒ‘æˆ˜å¤±è´¥ï¼Œé‡æ–°å¼€å§‹
                showChallengeResult(false);
                setTimeout(() => {
                    startChallenge();
                }, 2000);
            }
        }

        // æ˜¾ç¤ºæŒ‘æˆ˜ç»“æœ
        function showChallengeResult(isCorrect) {
            const resultDiv = document.getElementById('result-message');
            if (isCorrect) {
                resultDiv.className = 'result-message result-correct';
                resultDiv.textContent = 'æ­£ç¡®ï¼';
            } else {
                resultDiv.className = 'result-message result-incorrect';
                resultDiv.innerHTML = `é”™è¯¯ï¼æŒ‘æˆ˜å¤±è´¥ï¼<br>æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š${currentQuestion.name}<br>é‡æ–°å¼€å§‹æŒ‘æˆ˜...`;
            }
            resultDiv.classList.remove('hidden');
        }

        // æ›´æ–°æŒ‘æˆ˜è¿›åº¦
        function updateChallengeProgress() {
            document.getElementById('challenge-progress').textContent = `${challengeStats.completed}/${challengeStats.total}`;
            const progressPercent = (challengeStats.completed / challengeStats.total) * 100;
            document.getElementById('progress-fill').style.width = progressPercent + '%';
        }

        // å¼€å§‹è®¡æ—¶
        function startTimer() {
            challengeTimer = setInterval(() => {
                const elapsed = Date.now() - challengeStartTime;
                const minutes = Math.floor(elapsed / 60000);
                const seconds = Math.floor((elapsed % 60000) / 1000);
                document.getElementById('challenge-timer').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        // åœæ­¢è®¡æ—¶
        function stopTimer() {
            if (challengeTimer) {
                clearInterval(challengeTimer);
                challengeTimer = null;
            }
        }

        // å®ŒæˆæŒ‘æˆ˜
        function completeChallenge() {
            stopTimer();
            const elapsed = Date.now() - challengeStartTime;
            const minutes = Math.floor(elapsed / 60000);
            const seconds = Math.floor((elapsed % 60000) / 1000);
            
            const resultDiv = document.getElementById('result-message');
            resultDiv.className = 'result-message result-correct';
            resultDiv.innerHTML = `ğŸ‰ æ­å–œé€šå…³ï¼<br>ç”¨æ—¶ï¼š${minutes}åˆ†${seconds}ç§’<br>å…¨éƒ¨64å¦æŒ‘æˆ˜å®Œæˆï¼`;
            resultDiv.classList.remove('hidden');
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = function() {
            generateQuestion();
            updateStats();
        };
    </script>
</body>
</html>
